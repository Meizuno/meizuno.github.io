import{C as _,ay as N,aA as L,az as W,a1 as B,dx as J,aE as M,r as P,M as x,I as w,e as A,w as V,g as z,G as t,a2 as D,a0 as k,f as Q,o as X,aI as K,ao as Z,a6 as U,cY as ee,A as ae,t as te}from"./C3wVvJcF.js";import{u as le}from"./CBroOfN0.js";import{u as oe}from"./DgluIEaT.js";import{u as se}from"./BONZrO4R.js";import{u as ne}from"./C6Y-ieo6.js";import{_ as de}from"./DR_5-zrC.js";const[$,ue]=N("TagsInputRoot"),be=_({__name:"TagsInputRoot",props:{modelValue:{},defaultValue:{default:()=>[]},addOnPaste:{type:Boolean},addOnTab:{type:Boolean},addOnBlur:{type:Boolean},duplicate:{type:Boolean},disabled:{type:Boolean},delimiter:{default:","},dir:{},max:{default:0},id:{},convertValue:{},displayValue:{type:Function,default:r=>r.toString()},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","invalid","addTag","removeTag"],setup(r,{emit:p}){const e=r,o=p,{addOnPaste:c,disabled:m,delimiter:v,max:i,id:C,dir:T,addOnBlur:h,addOnTab:E}=L(e),g=oe(T),a=W(e,"modelValue",o,{defaultValue:e.defaultValue,passive:!0,deep:!0}),{forwardRef:s,currentElement:y}=B(),{focused:I}=J(y),R=se(y),{getItems:F,CollectionSlot:G}=M({isProvider:!0}),d=P(),S=P(!1),H=x(()=>Array.isArray(a.value)?[...a.value]:[]);function j(l){if(l!==-1){const u=F().filter(f=>f.ref.dataset.disabled!=="");a.value=a.value.filter((f,b)=>b!==l),o("removeTag",u[l].value)}}return ue({modelValue:a,onAddValue:l=>{const u=[...H.value],f=u.length>0&&typeof u[0]=="object",b=u.length>0&&typeof e.defaultValue[0]=="object";if((f||b)&&typeof e.convertValue!="function")throw new Error("You must provide a `convertValue` function when using objects as values.");const n=e.convertValue?e.convertValue(l):l;if(u.length>=i.value&&i.value)return o("invalid",n),!1;if(e.duplicate)return a.value=[...u,n],o("addTag",n),!0;if(u.includes(n))S.value=!0;else return a.value=[...u,n],o("addTag",n),!0;return o("invalid",n),!1},onRemoveValue:j,onInputKeydown:l=>{const u=l.target,f=F().map(n=>n.ref).filter(n=>n.dataset.disabled!=="");if(!f.length)return;const b=f.at(-1);switch(l.key){case"Delete":case"Backspace":{if(u.selectionStart!==0||u.selectionEnd!==0)break;if(d.value){const n=f.findIndex(O=>O===d.value);j(n),d.value=d.value===b?f.at(n-1):f.at(n+1),l.preventDefault()}else l.key==="Backspace"&&(d.value=b,l.preventDefault());break}case"Home":case"End":case"ArrowRight":case"ArrowLeft":{const n=l.key==="ArrowRight"&&g.value==="ltr"||l.key==="ArrowLeft"&&g.value==="rtl",O=!n;if(u.selectionStart!==0||u.selectionEnd!==0)break;if(O&&!d.value)d.value=b,l.preventDefault();else if(n&&b&&d.value===b)d.value=void 0,l.preventDefault();else if(d.value){const q=ne(l,d.value,void 0,{itemsArray:f,loop:!1,dir:g.value});q&&(d.value=q),l.preventDefault()}break}case"ArrowUp":case"ArrowDown":{d.value&&l.preventDefault();break}default:d.value=void 0}},selectedElement:d,isInvalidInput:S,addOnPaste:c,addOnBlur:h,addOnTab:E,dir:g,disabled:m,delimiter:v,max:i,id:C,displayValue:e.displayValue}),(l,u)=>(A(),w(t(G),null,{default:V(()=>[z(t(D),{ref:t(s),dir:t(g),as:l.as,"as-child":l.asChild,"data-invalid":S.value?"":void 0,"data-disabled":t(m)?"":void 0,"data-focused":t(I)?"":void 0},{default:V(()=>[k(l.$slots,"default",{modelValue:t(a)}),t(R)&&l.name?(A(),w(t(de),{key:0,name:l.name,value:t(a),required:l.required,disabled:t(m)},null,8,["name","value","required","disabled"])):Q("",!0)]),_:3},8,["dir","as","as-child","data-invalid","data-disabled","data-focused"])]),_:3}))}}),he=_({__name:"TagsInputInput",props:{placeholder:{},autoFocus:{type:Boolean},maxLength:{},asChild:{type:Boolean},as:{default:"input"}},setup(r){const p=r,e=$(),{forwardRef:o,currentElement:c}=B();function m(a){if(e.selectedElement.value=void 0,!e.addOnBlur.value)return;const s=a.target;if(!s.value)return;e.onAddValue(s.value)&&(s.value="")}function v(a){e.addOnTab.value&&h(a)}const i=P(!1);function C(){i.value=!0}function T(){requestAnimationFrame(()=>{i.value=!1})}async function h(a){if(i.value||(await Z(),a.defaultPrevented))return;const s=a.target;if(!s.value)return;e.onAddValue(s.value)&&(s.value=""),a.preventDefault()}function E(a){if(e.isInvalidInput.value=!1,a.data===null)return;const s=e.delimiter.value;if(s===a.data||s instanceof RegExp&&s.test(a.data)){const I=a.target;I.value=I.value.replace(s,""),e.onAddValue(I.value)&&(I.value="")}}function g(a){if(e.addOnPaste.value){a.preventDefault();const s=a.clipboardData;if(!s)return;const y=s.getData("text");e.delimiter.value?y.split(e.delimiter.value).forEach(R=>{e.onAddValue(R)}):e.onAddValue(y)}}return X(()=>{const a=c.value.nodeName==="INPUT"?c.value:c.value.querySelector("input");a&&setTimeout(()=>{p.autoFocus&&a?.focus()},1)}),(a,s)=>(A(),w(t(D),{id:t(e).id?.value,ref:t(o),type:"text",autocomplete:"off",autocorrect:"off",autocapitalize:"off",as:a.as,"as-child":a.asChild,maxlength:a.maxLength,placeholder:a.placeholder,disabled:t(e).disabled.value,"data-invalid":t(e).isInvalidInput.value?"":void 0,onInput:E,onKeydown:[K(h,["enter"]),K(v,["tab"]),t(e).onInputKeydown],onBlur:m,onCompositionstart:C,onCompositionend:T,onPaste:g},{default:V(()=>[k(a.$slots,"default")]),_:3},8,["id","as","as-child","maxlength","placeholder","disabled","data-invalid","onKeydown"]))}}),[Y,ie]=N("TagsInputItem"),ye=_({__name:"TagsInputItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(r){const p=r,{value:e}=L(p),o=$(),{forwardRef:c,currentElement:m}=B(),{CollectionItem:v}=M(),i=x(()=>o.selectedElement.value===m.value),C=x(()=>p.disabled||o.disabled.value),T=ie({value:e,isSelected:i,disabled:C,textId:"",displayValue:x(()=>o.displayValue(e.value))});return(h,E)=>(A(),w(t(v),{value:t(e)},{default:V(()=>[z(t(D),{ref:t(c),as:h.as,"as-child":h.asChild,"aria-labelledby":t(T).textId,"aria-current":i.value,"data-disabled":C.value?"":void 0,"data-state":i.value?"active":"inactive"},{default:V(()=>[k(h.$slots,"default")]),_:3},8,["as","as-child","aria-labelledby","aria-current","data-disabled","data-state"])]),_:3},8,["value"]))}}),ge=_({__name:"TagsInputItemDelete",props:{asChild:{type:Boolean},as:{default:"button"}},setup(r){const p=r;B();const e=$(),o=Y(),c=x(()=>o.disabled?.value||e.disabled.value);function m(){if(c.value)return;const v=e.modelValue.value.findIndex(i=>ee(i,o.value.value));e.onRemoveValue(v)}return(v,i)=>(A(),w(t(D),U({tabindex:"-1"},p,{"aria-labelledby":t(o).textId,"aria-current":t(o).isSelected.value,"data-state":t(o).isSelected.value?"active":"inactive","data-disabled":c.value?"":void 0,type:v.as==="button"?"button":void 0,onClick:m}),{default:V(()=>[k(v.$slots,"default")]),_:3},16,["aria-labelledby","aria-current","data-state","data-disabled","type"]))}}),Ie=_({__name:"TagsInputItemText",props:{asChild:{type:Boolean},as:{default:"span"}},setup(r){const p=r,e=Y();return B(),e.textId||=le(void 0,"reka-tags-input-item-text"),(o,c)=>(A(),w(t(D),U(p,{id:t(e).textId}),{default:V(()=>[k(o.$slots,"default",{},()=>[ae(te(t(e).displayValue.value),1)])]),_:3},16,["id"]))}});export{ye as _,Ie as a,ge as b,he as c,be as d};
