import{D as w,ae as $,ai as H,af as X,ag as A,ce as Y,ah as M,r as O,J as x,W as V,f as q,w as h,h as U,H as t,ab as B,X as D,g as Q,b as Z,an as K,ax as L,a7 as W,aG as ee,B as ae,t as te}from"./BTXGmdcq.js";import{u as le}from"./C6IGQG6m.js";import{u as ue}from"./C6Y-ieo6.js";import{u as se}from"./DvJmaCIR.js";import{u as re}from"./SsWVxQck.js";import{V as de}from"./RbvmsRGE.js";const[P,ne]=$("TagsInputRoot");var oe=w({__name:"TagsInputRoot",props:{modelValue:{type:[Array,null],required:!1},defaultValue:{type:Array,required:!1,default:()=>[]},addOnPaste:{type:Boolean,required:!1},addOnTab:{type:Boolean,required:!1},addOnBlur:{type:Boolean,required:!1},duplicate:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},delimiter:{type:null,required:!1,default:","},dir:{type:String,required:!1},max:{type:Number,required:!1,default:0},id:{type:String,required:!1},convertValue:{type:Function,required:!1},displayValue:{type:Function,required:!1,default:i=>i.toString()},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","invalid","addTag","removeTag"],setup(i,{emit:f}){const e=i,u=f,{addOnPaste:c,disabled:m,delimiter:v,max:o,id:T,dir:C,addOnBlur:I,addOnTab:k}=H(e),_=se(C),a=X(e,"modelValue",u,{defaultValue:e.defaultValue,passive:!0,deep:!0}),{forwardRef:s,currentElement:b}=A(),{focused:y}=Y(b),R=re(b),{getItems:F,CollectionSlot:G}=M({isProvider:!0}),d=O(),S=O(!1),J=x(()=>Array.isArray(a.value)?[...a.value]:[]);function N(l){if(l!==-1){const n=F().filter(p=>p.ref.dataset.disabled!=="");a.value=a.value.filter((p,g)=>g!==l),u("removeTag",n[l].value)}}return ne({modelValue:a,onAddValue:l=>{const n=[...J.value],p=n.length>0&&typeof n[0]=="object",g=n.length>0&&typeof e.defaultValue[0]=="object";if((p||g)&&typeof e.convertValue!="function")throw new Error("You must provide a `convertValue` function when using objects as values.");const r=e.convertValue?e.convertValue(l):l;if(n.length>=o.value&&o.value)return u("invalid",r),!1;if(e.duplicate)return a.value=[...n,r],u("addTag",r),!0;if(n.includes(r))S.value=!0;else return a.value=[...n,r],u("addTag",r),!0;return u("invalid",r),!1},onRemoveValue:N,onInputKeydown:l=>{const n=l.target,p=F().map(r=>r.ref).filter(r=>r.dataset.disabled!=="");if(!p.length)return;const g=p.at(-1);switch(l.key){case"Delete":case"Backspace":{if(n.selectionStart!==0||n.selectionEnd!==0)break;if(d.value){const r=p.findIndex(E=>E===d.value);N(r),d.value=d.value===g?p.at(r-1):p.at(r+1),l.preventDefault()}else l.key==="Backspace"&&(d.value=g,l.preventDefault());break}case"Home":case"End":case"ArrowRight":case"ArrowLeft":{const r=l.key==="ArrowRight"&&_.value==="ltr"||l.key==="ArrowLeft"&&_.value==="rtl",E=!r;if(n.selectionStart!==0||n.selectionEnd!==0)break;if(E&&!d.value)d.value=g,l.preventDefault();else if(r&&g&&d.value===g)d.value=void 0,l.preventDefault();else if(d.value){const j=ue(l,d.value,void 0,{itemsArray:p,loop:!1,dir:_.value});j&&(d.value=j),l.preventDefault()}break}case"ArrowUp":case"ArrowDown":{d.value&&l.preventDefault();break}default:d.value=void 0}},selectedElement:d,isInvalidInput:S,addOnPaste:c,addOnBlur:I,addOnTab:k,dir:_,disabled:m,delimiter:v,max:o,id:T,displayValue:e.displayValue}),(l,n)=>(q(),V(t(G),null,{default:h(()=>[U(t(B),{ref:t(s),dir:t(_),as:l.as,"as-child":l.asChild,"data-invalid":S.value?"":void 0,"data-disabled":t(m)?"":void 0,"data-focused":t(y)?"":void 0},{default:h(()=>[D(l.$slots,"default",{modelValue:t(a)}),t(R)&&l.name?(q(),V(t(de),{key:0,name:l.name,value:t(a),required:l.required,disabled:t(m)},null,8,["name","value","required","disabled"])):Q("v-if",!0)]),_:3},8,["dir","as","as-child","data-invalid","data-disabled","data-focused"])]),_:3}))}}),he=oe,ie=w({__name:"TagsInputInput",props:{placeholder:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},maxLength:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(i){const f=i,e=P(),{forwardRef:u,currentElement:c}=A();function m(a){if(e.selectedElement.value=void 0,!e.addOnBlur.value)return;const s=a.target;if(!s.value)return;e.onAddValue(s.value)&&(s.value="")}function v(a){e.addOnTab.value&&I(a)}const o=O(!1);function T(){o.value=!0}function C(){L(()=>{o.value=!1})}async function I(a){if(o.value||(await L(),a.defaultPrevented))return;const s=a.target;if(!s.value)return;e.onAddValue(s.value)&&(s.value=""),a.preventDefault()}function k(a){if(e.isInvalidInput.value=!1,a.data===null)return;const s=e.delimiter.value;if(s===a.data||s instanceof RegExp&&s.test(a.data)){const y=a.target;if(y.value=y.value.replace(s,""),y.value.trim()===""){y.value="";return}e.onAddValue(y.value)&&(y.value="")}}function _(a){if(e.addOnPaste.value){a.preventDefault();const s=a.clipboardData;if(!s)return;const b=s.getData("text");e.delimiter.value?b.split(e.delimiter.value).forEach(R=>{e.onAddValue(R)}):e.onAddValue(b)}}return Z(()=>{const a=c.value.nodeName==="INPUT"?c.value:c.value.querySelector("input");a&&setTimeout(()=>{f.autoFocus&&a?.focus()},1)}),(a,s)=>(q(),V(t(B),{id:t(e).id?.value,ref:t(u),type:"text",autocomplete:"off",autocorrect:"off",autocapitalize:"off",as:a.as,"as-child":a.asChild,maxlength:a.maxLength,placeholder:a.placeholder,disabled:t(e).disabled.value,"data-invalid":t(e).isInvalidInput.value?"":void 0,onInput:k,onKeydown:[K(I,["enter"]),K(v,["tab"]),t(e).onInputKeydown],onBlur:m,onCompositionstart:T,onCompositionend:C,onPaste:_},{default:h(()=>[D(a.$slots,"default")]),_:3},8,["id","as","as-child","maxlength","placeholder","disabled","data-invalid","onKeydown"]))}}),Te=ie;const[z,ce]=$("TagsInputItem");var pe=w({__name:"TagsInputItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(i){const f=i,{value:e}=H(f),u=P(),{forwardRef:c,currentElement:m}=A(),{CollectionItem:v}=M(),o=x(()=>u.selectedElement.value===m.value),T=x(()=>f.disabled||u.disabled.value),C=ce({value:e,isSelected:o,disabled:T,textId:"",displayValue:x(()=>u.displayValue(e.value))});return(I,k)=>(q(),V(t(v),{value:t(e)},{default:h(()=>[U(t(B),{ref:t(c),as:I.as,"as-child":I.asChild,"aria-labelledby":t(C).textId,"aria-current":o.value,"data-disabled":T.value?"":void 0,"data-state":o.value?"active":"inactive"},{default:h(()=>[D(I.$slots,"default")]),_:3},8,["as","as-child","aria-labelledby","aria-current","data-disabled","data-state"])]),_:3},8,["value"]))}}),Ve=pe,fe=w({__name:"TagsInputItemDelete",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(i){const f=i;A();const e=P(),u=z(),c=x(()=>u.disabled?.value||e.disabled.value);function m(){if(c.value)return;const v=e.modelValue.value.findIndex(o=>ee(o,u.value.value));e.onRemoveValue(v)}return(v,o)=>(q(),V(t(B),W({tabindex:"-1"},f,{"aria-labelledby":t(u).textId,"aria-current":t(u).isSelected.value,"data-state":t(u).isSelected.value?"active":"inactive","data-disabled":c.value?"":void 0,type:v.as==="button"?"button":void 0,onClick:m}),{default:h(()=>[D(v.$slots,"default")]),_:3},16,["aria-labelledby","aria-current","data-state","data-disabled","type"]))}}),qe=fe,ve=w({__name:"TagsInputItemText",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(i){const f=i,e=z();return A(),e.textId||=le(void 0,"reka-tags-input-item-text"),(u,c)=>(q(),V(t(B),W(f,{id:t(e).textId}),{default:h(()=>[D(u.$slots,"default",{},()=>[ae(te(t(e).displayValue.value),1)])]),_:3},16,["id"]))}}),Ce=ve;export{Ve as T,Ce as a,qe as b,Te as c,he as d};
