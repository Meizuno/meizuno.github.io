import{C as A,av as j,ay as O,a1 as G,aw as J,J as f,r as D,M as S,S as I,e as F,w as N,U as _,g as L,G as i,a6 as R,a2 as T,b9 as H,o as K,c as Q,aC as z,au as W,ak as X,y as Y,a3 as Z,a4 as ee,dh as te,d as ae,D as le,n as ie,dn as ne,F as se,a7 as $}from"./D5pWrCjK.js";import{_ as oe}from"./CCPz9AV9.js";import{u as re}from"./BsWRW4Zu.js";import{u as ue}from"./C6Y-ieo6.js";const[de,ce]=j("PinInputRoot"),pe=A({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{},defaultValue:{},placeholder:{default:""},mask:{type:Boolean},otp:{type:Boolean},type:{default:"text"},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","complete"],setup(V,{emit:r}){const a=V,l=r,{mask:p,otp:q,placeholder:B,type:C,disabled:v,dir:m}=O(a),{forwardRef:M}=G(),h=re(m),d=J(a,"modelValue",l,{defaultValue:a.defaultValue??[],passive:a.modelValue===void 0}),b=f(()=>Array.isArray(d.value)?[...d.value]:[]),g=D(new Set);function E(s){g.value.add(s)}const w=f(()=>a.type==="number"),y=f(()=>b.value.filter(u=>!!u||w.value&&u===0).length===g.value.size);return S(d,()=>{y.value&&l("complete",d.value)},{deep:!0}),ce({modelValue:d,currentModelValue:b,mask:p,otp:q,placeholder:B,type:C,dir:h,disabled:v,isCompleted:y,inputElements:g,onInputElementChange:E,isNumericMode:w}),(s,u)=>(F(),I(i(T),R(s.$attrs,{ref:i(M),dir:i(h),"data-complete":y.value?"":void 0,"data-disabled":i(v)?"":void 0}),{default:N(()=>[_(s.$slots,"default",{modelValue:i(d)}),L(oe,{id:s.id,as:"input",feature:"focusable",tabindex:"-1",value:b.value.join(""),name:s.name??"",disabled:i(v),required:s.required,onFocus:u[0]||(u[0]=x=>Array.from(g.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),fe=A({__name:"PinInputInput",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},setup(V){const r=V,a=de(),l=f(()=>Array.from(a.inputElements.value)),p=f(()=>a.currentModelValue.value[r.index]),q=f(()=>r.disabled||a.disabled.value),B=f(()=>a.otp.value),C=f(()=>a.mask.value),{primitiveElement:v,currentElement:m}=H();function M(e){const t=e.target;if((e.data?.length??0)>1){s(t.value);return}if(a.isNumericMode.value&&!/^\d*$/.test(t.value)){t.value=t.value.replace(/\D/g,"");return}t.value=t.value.slice(-1),x(r.index,t.value);const n=l.value[r.index+1];n&&n.focus()}function h(){const e=m.value;X(()=>{e&&!e.value&&(e.placeholder=a.placeholder.value)})}function d(e){ue(e,W(),void 0,{itemsArray:l.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:a.dir.value})}function b(e){if(e.preventDefault(),e.target.value)x(r.index,"");else{const o=l.value[r.index-1];o&&(o.focus(),x(r.index-1,""))}}function g(e){e.key==="Delete"&&(e.preventDefault(),x(r.index,""))}function E(e){const t=e.target;t.setSelectionRange(1,1),t.value||(t.placeholder="")}function w(e){h()}function y(e){e.preventDefault();const t=e.clipboardData;if(!t)return;const n=t.getData("text");s(n)}function s(e){const t=[...a.currentModelValue.value],n=e.length>=l.value.length?0:r.index,o=Math.min(n+e.length,l.value.length);for(let c=n;c<o;c++){const P=l.value[c],k=e[c-n];a.isNumericMode.value&&!/^\d*$/.test(k)||(t[c]=k,P.focus())}a.modelValue.value=t,l.value[o]?.focus()}function u(e){let t=e.length-1;for(;t>=0&&e[t]==="";)e.pop(),t--;return e}function x(e,t){const n=[...a.currentModelValue.value];if(a.isNumericMode.value){const o=+t;t===""||isNaN(o)?delete n[e]:n[e]=o}else n[e]=t;a.modelValue.value=u(n)}return S(p,()=>{p.value||h()}),K(()=>{a.onInputElementChange(m.value)}),Q(()=>{a.inputElements?.value.delete(m.value)}),(e,t)=>(F(),I(i(T),{ref_key:"primitiveElement",ref:v,autocapitalize:"none",as:e.as,"as-child":e.asChild,autocomplete:B.value?"one-time-code":"false",type:C.value?"password":"text",inputmode:i(a).isNumericMode.value?"numeric":"text",pattern:i(a).isNumericMode.value?"[0-9]*":void 0,placeholder:i(a).placeholder.value,value:p.value,disabled:q.value,"data-disabled":q.value?"":void 0,"data-complete":i(a).isCompleted.value?"":void 0,"aria-label":`pin input ${e.index+1} of ${l.value.length}`,onInput:t[0]||(t[0]=n=>M(n)),onKeydown:[z(d,["left","right","up","down","home","end"]),z(b,["backspace"]),z(g,["delete"])],onFocus:E,onBlur:w,onPaste:y},{default:N(()=>[_(e.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),ge={slots:{root:"relative inline-flex items-center gap-1.5",base:["rounded-md border-0 placeholder:text-dimmed text-center focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"]},variants:{size:{xs:{base:"size-6 text-xs"},sm:{base:"size-7 text-xs"},md:{base:"size-8 text-sm"},lg:{base:"size-9 text-sm"},xl:{base:"size-10 text-base"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},highlight:{true:""}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},ye={__name:"UPinInput",props:{as:{type:null,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},length:{type:[Number,String],required:!1,default:5},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultValue:{type:Array,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},mask:{type:Boolean,required:!1},modelValue:{type:null,required:!1},name:{type:String,required:!1},otp:{type:Boolean,required:!1},placeholder:{type:String,required:!1},required:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"}},emits:["update:modelValue","complete","change","blur"],setup(V,{expose:r,emit:a}){const l=V,p=a,q=Y(),B=Z(ee(l,"defaultValue","disabled","id","mask","modelValue","name","otp","required","type"),p),{emitFormInput:C,emitFormFocus:v,emitFormChange:m,emitFormBlur:M,size:h,color:d,id:b,name:g,highlight:E,disabled:w,ariaAttrs:y}=te(l),s=f(()=>$({extend:$(ge),...q.ui?.pinInput||{}})({color:d.value,variant:l.variant,size:h.value,highlight:E.value})),u=D([]),x=D(!1);function e(o){const c=new Event("change",{target:{value:o}});p("change",c),m()}function t(o){(!o.relatedTarget||x.value)&&(p("blur",o),M())}function n(){l.autofocus&&u.value[0]?.$el?.focus()}return K(()=>{setTimeout(()=>{n()},l.autofocusDelay)}),r({inputsRef:u}),(o,c)=>(F(),I(i(pe),R({...i(B),...i(y)},{id:i(b),name:i(g),placeholder:V.placeholder,class:s.value.root({class:[l.ui?.root,l.class]}),"onUpdate:modelValue":c[0]||(c[0]=P=>i(C)()),onComplete:e}),{default:N(()=>[(F(!0),ae(se,null,le(i(ne)(l.length),(P,k)=>(F(),I(i(fe),{key:P,ref_for:!0,ref:U=>u.value[k]=U,index:k,class:ie(s.value.base({class:l.ui?.base})),disabled:i(w),onBlur:t,onFocus:i(v)},null,8,["index","class","disabled","onFocus"]))),128))]),_:1},16,["id","name","placeholder","class"]))}};export{ye as default};
