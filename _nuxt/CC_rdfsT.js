import{T as P,a as N}from"./Dz6hw5wA.js";import{c as R}from"./nCACF461.js";import{Y as F,z as M,J as b,r as T,P as O,bt as U,e as m,f as c,h as p,i as g,w as C,F as $,E as H,n as u,H as d,g as W,W as _,K as S,t as J,aB as K,a7 as Y,a8 as z}from"./BTXGmdcq.js";import G from"./TWs0FKjQ.js";import"./BU8tAcgU.js";import"./C6IGQG6m.js";import"./uiXGz-MS.js";import"./DTLNqkyv.js";import"./DvJmaCIR.js";import"./BzeTaDLP.js";import"./Ch2MuIH6.js";const Q={slots:{root:"relative lg:h-[450px] my-5 grid lg:grid-cols-3 border border-muted rounded-md",list:"isolate relative p-2 border-b lg:border-b-0 lg:border-e border-muted overflow-y-auto",item:"",listWithChildren:"ms-4.5 border-s border-default",itemWithChildren:"ps-1.5 -ms-px",link:"relative group peer w-full px-2.5 py-1.5 before:inset-y-px before:inset-x-0 flex items-center gap-1.5 text-sm before:absolute before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2",linkLeadingIcon:"size-4 shrink-0",linkLabel:"truncate",linkTrailing:"ms-auto inline-flex gap-1.5 items-center",linkTrailingIcon:"size-5 transform transition-transform duration-200 shrink-0 group-data-expanded:rotate-180",content:"overflow-hidden lg:col-span-2 flex flex-col [&>div]:my-0 [&>div]:flex-1 [&>div]:flex [&>div]:flex-col [&>div>div]:border-0 [&>div>pre]:border-b-0 [&>div>pre]:border-s-0 [&>div>pre]:border-e-0 [&>div>pre]:rounded-l-none [&>div>pre]:flex-1 [&>div]:overflow-y-auto"},variants:{active:{true:{link:"text-highlighted before:bg-elevated"},false:{link:["hover:text-highlighted hover:before:bg-elevated/50","transition-colors before:transition-colors"]}}}},ue=Object.assign({inheritAttrs:!1},{__name:"ProseCodeTree",props:{defaultValue:{type:String,required:!1},expandAll:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(A){const e=A,j=F(),v=M(),[q,I]=R(),r=b(()=>z({extend:z(Q),...v.ui?.prose?.codeTree||{}})()),h=T(e.defaultValue?{path:e.defaultValue}:void 0),w=T(),L=T(1),k=b(()=>(L.value,j.default?.()?.flatMap(B).filter(Boolean)||[])),V=b(()=>D(k.value));function D(a){const t=new Map,n=[];a.forEach(s=>{const l=s.label.split("/");let i="";l.forEach((f,x)=>{if(i=i?`${i}/${f}`:f,!t.has(i)){const y={label:f,path:i,...x<l.length-1&&{children:[]}};t.set(i,y),x===0?n.push(y):t.get(l.slice(0,x).join("/"))?.children?.push(y)}})});const o=s=>s.sort((l,i)=>!!l.children==!!i.children?l.label.localeCompare(i.label):i.children?1:-1).map(l=>({...l,children:l.children&&o(l.children)}));return o(n)}function B(a,t){return typeof a.type=="symbol"?a.children?.map(B):{label:a.props?.filename||a.props?.label||`${t}`,icon:a.props?.icon,component:a}}const E=b(()=>{if(e.expandAll){const n=new Set;return k.value.forEach(o=>{const s=o.label.split("/");for(let l=1;l<s.length;l++)n.add(s.slice(0,l).join("/"))}),Array.from(n)}const a=h.value?.path;if(!a)return[];const t=a.split("/");return t.map((n,o)=>t.slice(0,o+1).join("/"))});return O(h,a=>{const t=k.value.find(n=>a?.path===n.label);t?.component&&(w.value=t)},{immediate:!0}),U(()=>L.value++),(a,t)=>(c(),m($,null,[p(d(q),null,{default:C(({items:n,level:o})=>[(c(!0),m($,null,H(n,(s,l)=>(c(),m("li",{key:`${o}-${l}`,role:"presentation",class:u(o>1?r.value.itemWithChildren({class:e.ui?.itemWithChildren}):r.value.item({class:e.ui?.item}))},[p(d(P),{level:o,value:s,"as-child":""},{default:C(({isExpanded:i,isSelected:f})=>[g("button",{type:"button",class:u(r.value.link({class:e.ui?.link,active:f}))},[s.children?.length?(c(),_(S,{key:0,name:i?d(v).ui.icons.folderOpen:d(v).ui.icons.folder,class:u(r.value.linkLeadingIcon({class:e.ui?.linkLeadingIcon}))},null,8,["name","class"])):(c(),_(G,{key:1,filename:s.label,class:u(r.value.linkLeadingIcon({class:e.ui?.linkLeadingIcon}))},null,8,["filename","class"])),g("span",{class:u(r.value.linkLabel({class:e.ui?.linkLabel}))},J(s.label),3),s.children?.length?(c(),m("span",{key:2,class:u(r.value.linkTrailing({class:e.ui?.linkTrailing}))},[p(S,{name:d(v).ui.icons.chevronDown,class:u(r.value.linkTrailingIcon({class:e.ui?.linkTrailingIcon}))},null,8,["name","class"])],2)):W("",!0)],2),s.children?.length&&i?(c(),m("ul",{key:0,role:"group",class:u(r.value.listWithChildren({class:e.ui?.listWithChildren}))},[p(d(I),{items:s.children,level:o+1},null,8,["items","level"])],2)):W("",!0)]),_:2},1032,["level","value"])],2))),128))]),_:1}),g("div",Y(a.$attrs,{class:r.value.root({class:[e.ui?.root,e.class]})}),[p(d(N),{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=n=>h.value=n),class:u(r.value.list({class:e.ui?.list})),items:V.value,"get-key":n=>n.path,"default-expanded":E.value},{default:C(()=>[p(d(I),{items:V.value,level:1},null,8,["items"])]),_:1},8,["modelValue","class","items","get-key","default-expanded"]),g("div",{class:u(r.value.content({class:e.ui?.content}))},[(c(),_(K(w.value?.component)))],2)],16)],64))}});export{ue as default};
