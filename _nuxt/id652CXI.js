import{D as A,ae as j,ai as H,ag as O,af as J,J as f,r as z,P as S,W as _,f as M,w as D,X as R,h as L,H as i,a7 as $,ab as T,b5 as W,b as K,d as X,an as k,am as G,ax as Q,z as Y,ap as Z,a5 as ee,bR as te,e as ae,E as le,n as ie,bS as re,F as ne,a8 as N}from"./BTXGmdcq.js";import{u as se}from"./DvJmaCIR.js";import{V as oe}from"./RbvmsRGE.js";import{u as ue}from"./C6Y-ieo6.js";const[de,ce]=j("PinInputRoot");var pe=A({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(g,{emit:o}){const a=g,l=o,{mask:p,otp:V,placeholder:B,type:I,disabled:m,dir:h}=H(a),{forwardRef:P}=O(),b=se(h),d=J(a,"modelValue",l,{defaultValue:a.defaultValue??[],passive:!0,deep:!0}),y=f(()=>Array.isArray(d.value)?[...d.value]:[]),v=z(new Set);function C(n){v.value.add(n)}const w=f(()=>a.type==="number"),q=f(()=>y.value.filter(u=>!!u||w.value&&u===0).length===v.value.size);return S(d,()=>{q.value&&l("complete",d.value)},{deep:!0}),ce({modelValue:d,currentModelValue:y,mask:p,otp:V,placeholder:B,type:I,dir:b,disabled:m,isCompleted:q,inputElements:v,onInputElementChange:C,isNumericMode:w}),(n,u)=>(M(),_(i(T),$(n.$attrs,{ref:i(P),dir:i(b),"data-complete":q.value?"":void 0,"data-disabled":i(m)?"":void 0}),{default:D(()=>[R(n.$slots,"default",{modelValue:i(d)}),L(oe,{id:n.id,as:"input",feature:"focusable",tabindex:"-1",value:y.value.join(""),name:n.name??"",disabled:i(m),required:n.required,onFocus:u[0]||(u[0]=x=>Array.from(v.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),fe=pe,ge=A({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(g){const o=g,a=de(),l=f(()=>Array.from(a.inputElements.value)),p=f(()=>a.currentModelValue.value[o.index]),V=f(()=>o.disabled||a.disabled.value),B=f(()=>a.otp.value),I=f(()=>a.mask.value),{primitiveElement:m,currentElement:h}=W();function P(e){const t=e.target;if((e.data?.length??0)>1){n(t.value);return}if(a.isNumericMode.value&&!/^\d*$/.test(t.value)){t.value=t.value.replace(/\D/g,"");return}t.value=e.data||t.value.slice(-1),x(o.index,t.value);const r=l.value[o.index+1];r&&r.focus()}function b(){const e=h.value;Q(()=>{e&&!e.value&&(e.placeholder=a.placeholder.value)})}function d(e){ue(e,G(),void 0,{itemsArray:l.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:a.dir.value})}function y(e){if(e.preventDefault(),e.target.value)x(o.index,"");else{const s=l.value[o.index-1];s&&(s.focus(),x(o.index-1,""))}}function v(e){e.key==="Delete"&&(e.preventDefault(),x(o.index,""))}function C(e){const t=e.target;t.setSelectionRange(1,1),t.value||(t.placeholder="")}function w(e){b()}function q(e){e.preventDefault();const t=e.clipboardData;if(!t)return;const r=t.getData("text");n(r)}function n(e){const t=[...a.currentModelValue.value],r=e.length>=l.value.length?0:o.index,s=Math.min(r+e.length,l.value.length);for(let c=r;c<s;c++){const F=l.value[c],E=e[c-r];a.isNumericMode.value&&!/^\d*$/.test(E)||(t[c]=E,F.focus())}a.modelValue.value=t,l.value[s]?.focus()}function u(e){let t=e.length-1;for(;t>=0&&e[t]==="";)e.pop(),t--;return e}function x(e,t){const r=[...a.currentModelValue.value];if(a.isNumericMode.value){const s=+t;t===""||isNaN(s)?delete r[e]:r[e]=s}else r[e]=t;a.modelValue.value=u(r)}return S(p,()=>{p.value||b()}),K(()=>{a.onInputElementChange(h.value)}),X(()=>{a.inputElements?.value.delete(h.value)}),(e,t)=>(M(),_(i(T),{ref_key:"primitiveElement",ref:m,autocapitalize:"none",as:e.as,"as-child":e.asChild,autocomplete:B.value?"one-time-code":"false",type:I.value?"password":"text",inputmode:i(a).isNumericMode.value?"numeric":"text",pattern:i(a).isNumericMode.value?"[0-9]*":void 0,placeholder:i(a).placeholder.value,value:p.value,disabled:V.value,"data-disabled":V.value?"":void 0,"data-complete":i(a).isCompleted.value?"":void 0,"aria-label":`pin input ${e.index+1} of ${l.value.length}`,onInput:t[0]||(t[0]=r=>P(r)),onKeydown:[k(d,["left","right","up","down","home","end"]),k(y,["backspace"]),k(v,["delete"])],onFocus:C,onBlur:w,onPaste:q},{default:D(()=>[R(e.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),ve=ge;const me={slots:{root:"relative inline-flex items-center gap-1.5",base:["rounded-md border-0 placeholder:text-dimmed text-center focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"]},variants:{size:{xs:{base:"size-6 text-xs"},sm:{base:"size-7 text-xs"},md:{base:"size-8 text-sm"},lg:{base:"size-9 text-sm"},xl:{base:"size-10 text-base"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",important:"",info:"",success:"",warning:"",error:"",neutral:""},highlight:{true:""}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"important",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-important"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"important",highlight:!0,class:"ring ring-inset ring-important"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},xe={__name:"UPinInput",props:{as:{type:null,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},length:{type:[Number,String],required:!1,default:5},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultValue:{type:Array,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},mask:{type:Boolean,required:!1},modelValue:{type:null,required:!1},name:{type:String,required:!1},otp:{type:Boolean,required:!1},placeholder:{type:String,required:!1},required:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"}},emits:["update:modelValue","complete","change","blur"],setup(g,{expose:o,emit:a}){const l=g,p=a,V=Y(),B=Z(ee(l,"disabled","id","mask","name","otp","required","type"),p),{emitFormInput:I,emitFormFocus:m,emitFormChange:h,emitFormBlur:P,size:b,color:d,id:y,name:v,highlight:C,disabled:w,ariaAttrs:q}=te(l),n=f(()=>N({extend:N(me),...V.ui?.pinInput||{}})({color:d.value,variant:l.variant,size:b.value,highlight:C.value})),u=z([]),x=z(!1);function e(s){const c=new Event("change",{target:{value:s}});p("change",c),h()}function t(s){(!s.relatedTarget||x.value)&&(p("blur",s),P())}function r(){l.autofocus&&u.value[0]?.$el?.focus()}return K(()=>{setTimeout(()=>{r()},l.autofocusDelay)}),o({inputsRef:u}),(s,c)=>(M(),_(i(fe),$({...i(B),...i(q)},{id:i(y),name:i(v),placeholder:g.placeholder,"model-value":g.modelValue,"default-value":g.defaultValue,"data-slot":"root",class:n.value.root({class:[l.ui?.root,l.class]}),"onUpdate:modelValue":c[0]||(c[0]=F=>i(I)()),onComplete:e}),{default:D(()=>[(M(!0),ae(ne,null,le(i(re)(l.length),(F,E)=>(M(),_(i(ve),{key:F,ref_for:!0,ref:U=>u.value[E]=U,index:E,"data-slot":"base",class:ie(n.value.base({class:l.ui?.base})),disabled:i(w),onBlur:t,onFocus:i(m)},null,8,["index","class","disabled","onFocus"]))),128))]),_:1},16,["id","name","placeholder","model-value","default-value","class"]))}};export{xe as default};
