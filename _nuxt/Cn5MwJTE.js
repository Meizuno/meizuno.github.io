import{D as Z,Y as Q,bQ as ee,ah as te,aj as le,J as h,bH as ae,am as j,ax as ne,e as x,f as s,F as D,E as H,W as v,aB as X,bh as G,H as u,z as ie,ap as re,a5 as se,ay as oe,az as U,bJ as ue,h as w,w as $,i as ce,X as E,g as R,a7 as T,K as P,n as k,B as de,t as fe,a8 as Y,aD as pe}from"./BTXGmdcq.js";import{i as ge,T as me,a as ve}from"./Dz6hw5wA.js";import{g as be}from"./Ch2MuIH6.js";import{M as ke}from"./uiXGz-MS.js";import{u as ye}from"./DPrTocle.js";import{c as J}from"./nCACF461.js";import{g as xe}from"./CzzxP46t.js";import"./BU8tAcgU.js";import"./C6IGQG6m.js";import"./DTLNqkyv.js";import"./DvJmaCIR.js";import"./BzeTaDLP.js";var he=Z({__name:"TreeVirtualizer",props:{overscan:{type:Number,required:!1},estimateSize:{type:Number,required:!1},textContent:{type:Function,required:!1}},setup(d){const z=d,_=Q(),t=ge(),B=ee(),{getItems:K}=te(),I=le("",1e3),S=h(()=>{const l=i=>z.textContent?z.textContent(i):i.toString().toLowerCase();return t.expandedItems.value.map((i,q)=>({index:q,textContent:l(i.value)}))});t.isVirtual.value=!0;const C=h(()=>{const l=B.value;if(l){const i=window.getComputedStyle(l);return{start:Number.parseFloat(i.paddingBlockStart||i.paddingTop),end:Number.parseFloat(i.paddingBlockEnd||i.paddingBottom)}}else return{start:0,end:0}}),p=ye({get scrollPaddingStart(){return C.value.start},get scrollPaddingEnd(){return C.value.end},get count(){return t.expandedItems.value.length??0},get horizontal(){return!1},getItemKey(l){return l+t.getKey(t.expandedItems.value[l].value)},estimateSize(){return z.estimateSize??28},getScrollElement(){return B.value},overscan:z.overscan??12}),O=h(()=>p.value.getVirtualItems().map(l=>({item:l,is:ae(_.default({item:t.expandedItems.value[l.index],virtualizer:p.value,virtualItem:l})[0],{"data-index":l.index,style:{position:"absolute",top:0,left:0,transform:`translateY(${l.start}px)`,overflowAnchor:"none"}})})));function M(l){p.value.scrollToIndex(l,{align:"start"}),requestAnimationFrame(()=>{const i=B.value.querySelector(`[data-index="${l}"]`);i instanceof HTMLElement&&i.focus()})}return t.virtualKeydownHook.on(l=>{const i=l.altKey||l.ctrlKey||l.metaKey;if(l.key==="Tab"&&!i)return;const f=ke[l.key];if(["first","last"].includes(f)){l.preventDefault();const a=f==="first"?0:t.expandedItems.value.length-1;p.value.scrollToIndex(a),requestAnimationFrame(()=>{const g=K();(f==="first"?g[0]:g[g.length-1]).ref.focus()})}else if(f==="prev"&&l.key!=="ArrowUp"){const a=j(),g=Number(a.getAttribute("data-index")),m=Number(a.getAttribute("data-indent")),y=t.expandedItems.value.slice(0,g).map((b,n)=>({...b,index:n})).reverse().find(b=>b.level===m-1);y&&M(y.index)}else if(!f&&!i){I.value+=l.key;const a=Number(j()?.getAttribute("data-index")),g=S.value[a].textContent,m=S.value.map(b=>b.textContent),V=be(m,I.value,g),y=S.value.find(b=>b.textContent===V);y&&M(y.index)}ne(()=>{l.shiftKey&&f&&t.handleMultipleReplace(f,j(),K,t.expandedItems.value.map(a=>a.value))})}),(l,i)=>(s(),x("div",{"data-reka-virtualizer":"",style:G({position:"relative",width:"100%",height:`${u(p).getTotalSize()}px`})},[(s(!0),x(D,null,H(O.value,({is:q,item:f})=>(s(),v(X(q),{key:f.key}))),128))],4))}}),Ie=he;const Te={slots:{root:"relative isolate",item:"w-full",listWithChildren:"border-s border-default",itemWithChildren:"ps-1.5 -ms-px",link:"relative group w-full flex items-center text-sm select-none before:absolute before:inset-y-px before:inset-x-0 before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2",linkLeadingIcon:"shrink-0 relative",linkLabel:"truncate",linkTrailing:"ms-auto inline-flex gap-1.5 items-center",linkTrailingIcon:"shrink-0 transform transition-transform duration-200 group-data-expanded:rotate-180"},variants:{virtualize:{true:{root:"overflow-y-auto"}},color:{primary:{link:"focus-visible:before:ring-primary"},secondary:{link:"focus-visible:before:ring-secondary"},important:{link:"focus-visible:before:ring-important"},info:{link:"focus-visible:before:ring-info"},success:{link:"focus-visible:before:ring-success"},warning:{link:"focus-visible:before:ring-warning"},error:{link:"focus-visible:before:ring-error"},neutral:{link:"focus-visible:before:ring-inverted"}},size:{xs:{listWithChildren:"ms-4",link:"px-2 py-1 text-xs gap-1",linkLeadingIcon:"size-4",linkTrailingIcon:"size-4"},sm:{listWithChildren:"ms-4.5",link:"px-2.5 py-1.5 text-xs gap-1.5",linkLeadingIcon:"size-4",linkTrailingIcon:"size-4"},md:{listWithChildren:"ms-5",link:"px-2.5 py-1.5 text-sm gap-1.5",linkLeadingIcon:"size-5",linkTrailingIcon:"size-5"},lg:{listWithChildren:"ms-5.5",link:"px-3 py-2 text-sm gap-2",linkLeadingIcon:"size-5",linkTrailingIcon:"size-5"},xl:{listWithChildren:"ms-6",link:"px-3 py-2 text-base gap-2",linkLeadingIcon:"size-6",linkTrailingIcon:"size-6"}},selected:{true:{link:"before:bg-elevated"}},disabled:{true:{link:"cursor-not-allowed opacity-75"}}},compoundVariants:[{color:"primary",selected:!0,class:{link:"text-primary"}},{color:"secondary",selected:!0,class:{link:"text-secondary"}},{color:"important",selected:!0,class:{link:"text-important"}},{color:"info",selected:!0,class:{link:"text-info"}},{color:"success",selected:!0,class:{link:"text-success"}},{color:"warning",selected:!0,class:{link:"text-warning"}},{color:"error",selected:!0,class:{link:"text-error"}},{color:"neutral",selected:!0,class:{link:"text-highlighted"}},{selected:!1,disabled:!1,class:{link:["hover:text-highlighted hover:before:bg-elevated/50","transition-colors before:transition-colors"]}}],defaultVariants:{color:"primary",size:"md"}},Ae=Object.assign({inheritAttrs:!1},{__name:"UTree",props:{as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},getKey:{type:Function,required:!1},labelKey:{type:null,required:!1,default:"label"},trailingIcon:{type:null,required:!1},expandedIcon:{type:null,required:!1},collapsedIcon:{type:null,required:!1},items:{type:null,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},nested:{type:Boolean,required:!1,default:!0},virtualize:{type:[Boolean,Object],required:!1,default:!1},onSelect:{type:Function,required:!1},onToggle:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},expanded:{type:Array,required:!1},defaultExpanded:{type:Array,required:!1},selectionBehavior:{type:String,required:!1},propagateSelect:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},bubbleSelect:{type:Boolean,required:!1}},emits:["update:modelValue","update:expanded"],setup(d,{expose:z,emit:_}){const t=d,B=_,K=Q(),I=ie(),S=re(se(t,"items","multiple","expanded","disabled","propagateSelect","bubbleSelect"),B),C=h(()=>typeof t.as=="string"||typeof t.as?.render=="function"?{root:t.as,link:"button"}:U(t.as,{root:"ul",link:"button"})),p=h(()=>t.virtualize?!1:t.nested),O=h(()=>{const N={xs:{base:2,perLevel:5.5},sm:{base:2.5,perLevel:6},md:{base:2.5,perLevel:6.5},lg:{base:3,perLevel:7},xl:{base:3,perLevel:7.5}}[t.size||"md"];return e=>`calc(var(--spacing) * ${(e-1)*N.perLevel+N.base})`}),M=oe(()=>t.virtualize?U(typeof t.virtualize=="boolean"?{}:t.virtualize,{estimateSize:xe(t.items||[],t.size||"md")}):!1),[l,i]=J(),[q,f]=J({props:{item:{type:Object,required:!0},index:{type:Number,required:!0},level:{type:Number,required:!0}}}),a=h(()=>Y({extend:Y(Te),...I.ui?.tree||{}})({color:t.color,size:t.size,virtualize:!!t.virtualize})),g=ue("rootRef");function m(n){return pe(n,t.labelKey)}function V(n){return t.getKey&&t.getKey(n)||m(n)}function y(n){const N=n.defaultExpanded?V(n):null,e=n.children?.flatMap(r=>y(r))??[];return[N,...e].filter(Boolean)}const b=h(()=>t.defaultExpanded??t.items?.flatMap(n=>y(n)));return z({get $el(){return g.value?.$el}}),(n,N)=>(s(),x(D,null,[w(u(q),null,{default:$(({item:e,index:r,level:o})=>[ce("li",{role:"presentation",class:k(p.value&&o>1?a.value.itemWithChildren({class:[t.ui?.itemWithChildren,e.ui?.itemWithChildren]}):a.value.item({class:[t.ui?.item,e.ui?.item]}))},[w(u(me),{level:o,value:e,"as-child":"",onToggle:c=>(e.onToggle??t.onToggle)?.(c,e),onSelect:c=>(e.onSelect??t.onSelect)?.(c,e)},{default:$(({isExpanded:c,isSelected:L,isIndeterminate:W,handleSelect:A,handleToggle:F})=>[E(n.$slots,e.slot?`${e.slot}-wrapper`:"item-wrapper",T({index:r,level:o,expanded:c,selected:L,indeterminate:W,handleSelect:A,handleToggle:F,ui:a.value},{item:e}),()=>[(s(),v(X(C.value.link),{type:C.value.link==="button"?"button":void 0,disabled:e.disabled||d.disabled,"data-slot":"link",class:k(a.value.link({class:[t.ui?.link,e.ui?.link,e.class],selected:L,disabled:e.disabled||d.disabled})),style:G(!p.value&&o>1?{paddingLeft:O.value(o)}:void 0)},{default:$(()=>[E(n.$slots,e.slot||"item",T({index:r,level:o,expanded:c,selected:L,indeterminate:W,handleSelect:A,handleToggle:F,ui:a.value},{item:e}),()=>[E(n.$slots,e.slot?`${e.slot}-leading`:"item-leading",T({index:r,level:o,expanded:c,selected:L,indeterminate:W,handleSelect:A,handleToggle:F,ui:a.value},{item:e}),()=>[e.icon?(s(),v(P,{key:0,name:e.icon,"data-slot":"linkLeadingIcon",class:k(a.value.linkLeadingIcon({class:[t.ui?.linkLeadingIcon,e.ui?.linkLeadingIcon]}))},null,8,["name","class"])):e.children?.length?(s(),v(P,{key:1,name:c?d.expandedIcon??u(I).ui.icons.folderOpen:d.collapsedIcon??u(I).ui.icons.folder,"data-slot":"linkLeadingIcon",class:k(a.value.linkLeadingIcon({class:[t.ui?.linkLeadingIcon,e.ui?.linkLeadingIcon]}))},null,8,["name","class"])):R("",!0)]),m(e)||K[e.slot?`${e.slot}-label`:"item-label"]?(s(),x("span",{key:0,"data-slot":"linkLabel",class:k(a.value.linkLabel({class:[t.ui?.linkLabel,e.ui?.linkLabel]}))},[E(n.$slots,e.slot?`${e.slot}-label`:"item-label",T({index:r,level:o,expanded:c,selected:L,indeterminate:W,handleSelect:A,handleToggle:F,ui:a.value},{item:e}),()=>[de(fe(m(e)),1)])],2)):R("",!0),e.trailingIcon||e.children?.length||K[e.slot?`${e.slot}-trailing`:"item-trailing"]?(s(),x("span",{key:1,"data-slot":"linkTrailing",class:k(a.value.linkTrailing({class:[t.ui?.linkTrailing,e.ui?.linkTrailing]}))},[E(n.$slots,e.slot?`${e.slot}-trailing`:"item-trailing",T({index:r,level:o,expanded:c,selected:L,indeterminate:W,handleSelect:A,handleToggle:F,ui:a.value},{item:e}),()=>[e.trailingIcon?(s(),v(P,{key:0,name:e.trailingIcon,"data-slot":"linkTrailingIcon",class:k(a.value.linkTrailingIcon({class:[t.ui?.linkTrailingIcon,e.ui?.linkTrailingIcon]}))},null,8,["name","class"])):e.children?.length?(s(),v(P,{key:1,name:d.trailingIcon??u(I).ui.icons.chevronDown,"data-slot":"linkTrailingIcon",class:k(a.value.linkTrailingIcon({class:[t.ui?.linkTrailingIcon,e.ui?.linkTrailingIcon]}))},null,8,["name","class"])):R("",!0)])],2)):R("",!0)])]),_:2},1032,["type","disabled","class","style"]))]),p.value&&e.children?.length&&c?(s(),x("ul",{key:0,role:"group","data-slot":"listWithChildren",class:k(a.value.listWithChildren({class:[t.ui?.listWithChildren,e.ui?.listWithChildren]}))},[w(u(i),{items:e.children,level:o+1},null,8,["items","level"])],2)):R("",!0)]),_:2},1032,["level","value","onToggle","onSelect"])],2)]),_:3}),w(u(l),null,{default:$(({items:e,level:r})=>[(s(!0),x(D,null,H(e,(o,c)=>(s(),v(u(f),{key:`${r}-${c}`,item:o,index:c,level:r},null,8,["item","index","level"]))),128))]),_:1}),w(u(ve),T({ref_key:"rootRef",ref:g},{...u(S),...n.$attrs},{as:C.value.root,"model-value":d.modelValue,"default-value":d.defaultValue,"data-slot":"root",class:a.value.root({class:[t.ui?.root,t.class]}),"get-key":V,"default-expanded":b.value,"selection-behavior":d.selectionBehavior}),{default:$(({flattenItems:e})=>[d.virtualize?(s(),v(u(Ie),T({key:0,"text-content":r=>m(r.value)},M.value),{default:$(({item:r,virtualItem:o})=>[w(u(f),{item:r.value,index:o.index,level:r.level},null,8,["item","index","level"])]),_:1},16,["text-content"])):p.value?(s(),v(u(i),{key:2,items:d.items,level:1},null,8,["items"])):(s(!0),x(D,{key:1},H(e,(r,o)=>(s(),v(u(f),{key:r._id,item:r.value,index:o,level:r.level},null,8,["item","index","level"]))),128))]),_:1},16,["as","model-value","default-value","class","default-expanded","selection-behavior"])],64))}});export{Ae as default};
