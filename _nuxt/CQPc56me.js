import{O as c,c as p,aK as h,ba as b,I as f,d4 as w,r as i,d1 as B,aG as S,aL as E,d5 as u,b6 as k,ak as O}from"./BFX9fWae.js";import{h as x}from"./DvXkyWUv.js";function R(o){let e;c(()=>h(o),t=>{t?e=x(t):e&&e()}),p(()=>{e&&e()})}const C=b(()=>{const o=i(new Map),e=i(),t=f(()=>{for(const s of o.value.values())if(s)return!0;return!1}),n=B({scrollBody:i(!0)});let a=null;const v=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",u&&a?.(),e.value=void 0};return c(t,(s,y)=>{if(!S)return;if(!s){y&&v();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,d={padding:l,margin:0},r=n.scrollBody?.value?typeof n.scrollBody.value=="object"?E({padding:n.scrollBody.value.padding===!0?l:n.scrollBody.value.padding,margin:n.scrollBody.value.margin===!0?l:n.scrollBody.value.margin},d):d:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof r.padding=="number"?`${r.padding}px`:String(r.padding),document.body.style.marginRight=typeof r.margin=="number"?`${r.margin}px`:String(r.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),u&&(a=k(document,"touchmove",g=>L(g),{passive:!1})),O(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),o});function H(o){const e=Math.random().toString(36).substring(2,7),t=C();t.value.set(e,o??!1);const n=f({get:()=>t.value.get(e)??!1,set:a=>t.value.set(e,a)});return w(()=>{t.value.delete(e)}),n}function m(o){const e=window.getComputedStyle(o);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&o.clientWidth<o.scrollWidth||e.overflowY==="auto"&&o.clientHeight<o.scrollHeight)return!0;{const t=o.parentNode;return!(t instanceof Element)||t.tagName==="BODY"?!1:m(t)}}function L(o){const e=o||window.event,t=e.target;return t instanceof Element&&m(t)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}export{R as a,H as u};
