import{aG as we,D as T,ae as Q,ai as qe,ah as O,b5 as ue,r as I,af as de,P as Ve,bi as J,W as L,f as w,w as F,X as z,g as ce,H as a,ax as D,ab as N,aj as fe,h as ve,an as R,aF as Z,J as B,bO as Ie,b as Ke,d as Le,a7 as ee,ag as pe,bP as Fe,bz as Se,Y as Ae,bQ as Be,F as ne,bH as Te,am as He,e as se,E as Me,aB as ze,bh as Ne}from"./r87NNr1M.js";import{u as me}from"./7cgco4TI.js";import{f as $}from"./C93hBZeB.js";import{u as Pe,g as De}from"./oRdeojoN.js";import{g as Re,M as $e}from"./CmU2bdSD.js";import{u as Oe}from"./DDDiGe6x.js";import{u as Ge}from"./CZvg1K4s.js";import{u as Ue}from"./kRIii9yh.js";import{V as je}from"./VdHJT7hv.js";import{u as Ye}from"./BqP0TK5s.js";function re(d){return d?.querySelector("[data-state=checked]")}function We(d,l,i){return d===void 0?!1:Array.isArray(d)?d.some(t=>K(t,l,i)):K(d,l,i)}function K(d,l,i){return d===void 0||l===void 0?!1:typeof d=="string"?d===l:typeof i=="function"?i(d,l):typeof i=="string"?d?.[i]===l?.[i]:we(d,l)}const[G,Xe]=Q("ListboxRoot");var Je=T({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(d,{expose:l,emit:i}){const t=d,f=i,{multiple:c,highlightOnHover:g,orientation:y,disabled:p,selectionBehavior:k,dir:_}=qe(t),{getItems:b}=O({isProvider:!0}),{handleTypeaheadSearch:o}=Pe(),{primitiveElement:u,currentElement:s}=ue(),m=Ue(),C=Oe(_),E=Ge(s),q=I(),S=I(!1),A=I(!0),v=de(t,"modelValue",f,{defaultValue:t.defaultValue??(c.value?[]:void 0),passive:t.modelValue===void 0,deep:!0});function he(e){if(S.value=!0,t.multiple){const n=Array.isArray(v.value)?[...v.value]:[],r=n.findIndex(h=>K(h,e,t.by));t.selectionBehavior==="toggle"?(r===-1?n.push(e):n.splice(r,1),v.value=n):(v.value=[e],q.value=e)}else t.selectionBehavior==="toggle"&&K(v.value,e,t.by)?v.value=void 0:v.value=e;setTimeout(()=>{S.value=!1},1)}const x=I(null),U=I(null),H=I(!1),j=I(!1),te=J(),Y=J(),ae=J();function W(){return b().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function V(e,n=!0){if(!e)return;x.value=e,A.value&&x.value.focus(),n&&x.value.scrollIntoView({block:"nearest"});const r=b().find(h=>h.ref===e);f("highlight",r)}function ge(e){if(H.value)ae.trigger(e);else{const n=b().find(r=>K(r.value,e,t.by));n&&(x.value=n.ref,V(n.ref))}}function ye(e){x.value&&x.value.isConnected&&(e.preventDefault(),e.stopPropagation(),j.value||x.value.click())}function be(e){if(A.value){if(S.value=!0,H.value)Y.trigger(e);else{const n=e.altKey||e.ctrlKey||e.metaKey;if(n&&e.key==="a"&&c.value){const r=b(),h=r.map(M=>M.value);v.value=[...h],e.preventDefault(),V(r[r.length-1].ref)}else if(!n){const r=o(e.key,b());r&&V(r)}}setTimeout(()=>{S.value=!1},1)}}function xe(){j.value=!0}function _e(){D(()=>{j.value=!1})}function ie(){D(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});le(e)})}function X(e){const n=x.value;n?.isConnected&&(U.value=n),x.value=null,f("leave",e)}function Ce(e){const n=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(n),f("entryFocus",n),!n.defaultPrevented)if(U.value)V(U.value);else{const r=W()?.[0];V(r)}}function le(e){const n=Re(e,y.value,C.value);if(!n)return;let r=W();if(x.value){if(n==="last")r.reverse();else if(n==="prev"||n==="next"){n==="prev"&&r.reverse();const h=r.indexOf(x.value);r=r.slice(h+1)}ke(e,r[0])}if(r.length){const h=!x.value&&n==="prev"?r.length-1:0;V(r[h])}if(H.value)return Y.trigger(e)}function ke(e,n){if(!(H.value||t.selectionBehavior!=="replace"||!c.value||!Array.isArray(v.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const h=b().filter(P=>P.ref.dataset.disabled!=="");let M=h.find(P=>P.ref===n)?.value;if(e.key===m.END?M=h[h.length-1].value:e.key===m.HOME&&(M=h[0].value),!M||!q.value)return;const Ee=$(h.map(P=>P.value),q.value,M);v.value=Ee}}async function oe(e){if(await D(),H.value)te.trigger(e);else{const n=W(),r=n.find(h=>h.dataset.state==="checked");r?V(r):n.length&&V(n[0])}}return Ve(v,()=>{S.value||D(()=>{oe()})},{immediate:!0,deep:!0}),l({highlightedElement:x,highlightItem:ge,highlightFirstItem:ie,highlightSelected:oe,getItems:b}),Xe({modelValue:v,onValueChange:he,multiple:c,orientation:y,dir:C,disabled:p,highlightOnHover:g,highlightedElement:x,isVirtual:H,virtualFocusHook:te,virtualKeydownHook:Y,virtualHighlightHook:ae,by:t.by,firstValue:q,selectionBehavior:k,focusable:A,onLeave:X,onEnter:Ce,changeHighlight:V,onKeydownEnter:ye,onKeydownNavigation:le,onKeydownTypeAhead:be,onCompositionStart:xe,onCompositionEnd:_e,highlightFirstItem:ie}),(e,n)=>(w(),L(a(N),{ref_key:"primitiveElement",ref:u,as:e.as,"as-child":e.asChild,dir:a(C),"data-disabled":a(p)?"":void 0,onPointerleave:X,onFocusout:n[0]||(n[0]=async r=>{const h=r.relatedTarget||r.target;await D(),x.value&&a(s)&&!a(s).contains(h)&&X(r)})},{default:F(()=>[z(e.$slots,"default",{modelValue:a(v)}),a(E)&&e.name?(w(),L(a(je),{key:0,name:e.name,value:a(v),disabled:a(p),required:e.required},null,8,["name","value","disabled","required"])):ce("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),yt=Je,Qe=T({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(d){const{CollectionSlot:l}=O(),i=G(),t=fe(!1,10);return(f,c)=>(w(),L(a(l),null,{default:F(()=>[ve(a(N),{role:"listbox",as:f.as,"as-child":f.asChild,tabindex:a(i).focusable.value?a(i).highlightedElement.value?"-1":"0":"-1","aria-orientation":a(i).orientation.value,"aria-multiselectable":!!a(i).multiple.value,"data-orientation":a(i).orientation.value,onMousedown:c[0]||(c[0]=Z(g=>t.value=!0,["left"])),onFocus:c[1]||(c[1]=g=>{a(t)||a(i).onEnter(g)}),onKeydown:[c[2]||(c[2]=R(g=>{a(i).orientation.value==="vertical"&&(g.key==="ArrowLeft"||g.key==="ArrowRight")||a(i).orientation.value==="horizontal"&&(g.key==="ArrowUp"||g.key==="ArrowDown")||(g.preventDefault(),a(i).focusable.value&&a(i).onKeydownNavigation(g))},["down","up","left","right","home","end"])),R(a(i).onKeydownEnter,["enter"]),a(i).onKeydownTypeAhead]},{default:F(()=>[z(f.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),bt=Qe,Ze=T({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(d,{emit:l}){const i=d,f=de(i,"modelValue",l,{defaultValue:"",passive:i.modelValue===void 0}),c=G(),{primitiveElement:g,currentElement:y}=ue(),p=B(()=>i.disabled||c.disabled.value||!1),k=I();return Ie(()=>k.value=c.highlightedElement.value?.id),Ke(()=>{c.focusable.value=!1,setTimeout(()=>{i.autoFocus&&y.value?.focus()},1)}),Le(()=>{c.focusable.value=!0}),(_,b)=>(w(),L(a(N),{ref_key:"primitiveElement",ref:g,as:_.as,"as-child":_.asChild,value:a(f),disabled:p.value?"":void 0,"data-disabled":p.value?"":void 0,"aria-disabled":p.value??void 0,"aria-activedescendant":k.value,type:"text",onKeydown:[R(Z(a(c).onKeydownNavigation,["prevent"]),["down","up","home","end"]),R(a(c).onKeydownEnter,["enter"])],onInput:b[0]||(b[0]=o=>{f.value=o.target.value,a(c).highlightFirstItem()}),onCompositionstart:a(c).onCompositionStart,onCompositionend:a(c).onCompositionEnd},{default:F(()=>[z(_.$slots,"default",{modelValue:a(f)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),xt=Ze;const[_t,et]=Q("ListboxGroup");var tt=T({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(d){const l=d,i=me(void 0,"reka-listbox-group");return et({id:i}),(t,f)=>(w(),L(a(N),ee({role:"group"},l,{"aria-labelledby":a(i)}),{default:F(()=>[z(t.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),Ct=tt;const at="listbox.select",[it,lt]=Q("ListboxItem");var ot=T({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(d,{emit:l}){const i=d,t=l,f=me(void 0,"reka-listbox-item"),{CollectionItem:c}=O(),{forwardRef:g,currentElement:y}=pe(),p=G(),k=B(()=>y.value===p.highlightedElement.value),_=B(()=>We(p.modelValue.value,i.value,p.by)),b=B(()=>p.disabled.value||i.disabled);async function o(s){t("select",s),!s?.defaultPrevented&&!b.value&&s&&(p.onValueChange(i.value),p.changeHighlight(y.value))}function u(s){const m={originalEvent:s,value:i.value};Se(at,o,m)}return lt({isSelected:_}),(s,m)=>(w(),L(a(c),{value:s.value},{default:F(()=>[Fe([k.value,_.value],()=>ve(a(N),ee({id:a(f)},s.$attrs,{ref:a(g),role:"option",tabindex:a(p).focusable.value?k.value?"0":"-1":-1,"aria-selected":_.value,as:s.as,"as-child":s.asChild,disabled:b.value?"":void 0,"data-disabled":b.value?"":void 0,"data-highlighted":k.value?"":void 0,"data-state":_.value?"checked":"unchecked",onClick:u,onKeydown:R(Z(u,["prevent"]),["space"]),onPointermove:m[0]||(m[0]=()=>{a(p).highlightedElement.value!==a(y)&&a(p).highlightOnHover.value&&!a(p).focusable.value&&a(p).changeHighlight(a(y),!1)})}),{default:F(()=>[z(s.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),m,1)]),_:3},8,["value"]))}}),kt=ot,nt=T({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(d){const l=d;pe();const i=it();return(t,f)=>a(i).isSelected.value?(w(),L(a(N),ee({key:0,"aria-hidden":"true"},l),{default:F(()=>[z(t.$slots,"default")]),_:3},16)):ce("v-if",!0)}}),Et=nt,st=T({__name:"ListboxVirtualizer",props:{options:{type:Array,required:!0},overscan:{type:Number,required:!1},estimateSize:{type:Number,required:!1},textContent:{type:Function,required:!1}},setup(d){const l=d,i=Ae(),t=G(),f=Be(),{getItems:c}=O();t.isVirtual.value=!0;const g=B(()=>{const o=f.value;if(o){const u=window.getComputedStyle(o);return{start:Number.parseFloat(u.paddingBlockStart||u.paddingTop),end:Number.parseFloat(u.paddingBlockEnd||u.paddingBottom)}}else return{start:0,end:0}}),y=Ye({get scrollPaddingStart(){return g.value.start},get scrollPaddingEnd(){return g.value.end},get count(){return l.options.length},get horizontal(){return t.orientation.value==="horizontal"},estimateSize(){return l.estimateSize??28},getScrollElement(){return f.value},overscan:l.overscan??12}),p=B(()=>y.value.getVirtualItems().map(o=>{const u=i.default({option:l.options[o.index],virtualizer:y.value,virtualItem:o})[0],s=u.type===ne&&Array.isArray(u.children)?u.children[0]:u;return{item:o,is:Te(s,{key:`${o.key}`,"data-index":o.index,"aria-setsize":l.options.length,"aria-posinset":o.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${o.start}px)`,overflowAnchor:"none"}})}}));t.virtualFocusHook.on(o=>{const u=l.options.findIndex(s=>Array.isArray(t.modelValue.value)?K(s,t.modelValue.value[0],t.by):K(s,t.modelValue.value,t.by));u!==-1?(o?.preventDefault(),y.value.scrollToIndex(u,{align:"start"}),requestAnimationFrame(()=>{const s=re(f.value);s&&(t.changeHighlight(s),o&&s?.focus())})):t.highlightFirstItem()}),t.virtualHighlightHook.on(o=>{const u=l.options.findIndex(s=>K(s,o,t.by));y.value.scrollToIndex(u,{align:"start"}),requestAnimationFrame(()=>{const s=re(f.value);s&&t.changeHighlight(s)})});const k=fe("",1e3),_=B(()=>{const o=u=>l.textContent?l.textContent(u):u?.toString().toLowerCase();return l.options.map((u,s)=>({index:s,textContent:o(u)}))});function b(o,u){if(!t.firstValue?.value||!t.multiple.value||!Array.isArray(t.modelValue.value))return;const m=c().filter(E=>E.ref.dataset.disabled!=="").find(E=>E.ref===t.highlightedElement.value)?.value;if(!m)return;let C=null;switch(u){case"prev":case"next":{C=$(l.options,t.firstValue.value,m);break}case"first":{C=$(l.options,t.firstValue.value,l.options?.[0]);break}case"last":{C=$(l.options,t.firstValue.value,l.options?.[l.options.length-1]);break}}t.modelValue.value=C}return t.virtualKeydownHook.on(o=>{const u=o.altKey||o.ctrlKey||o.metaKey;if(o.key==="Tab"&&!u)return;let m=$e[o.key];if(u&&o.key==="a"&&t.multiple.value?(o.preventDefault(),t.modelValue.value=[...l.options],m="last"):o.shiftKey&&m&&b(o,m),["first","last"].includes(m)){o.preventDefault();const C=m==="first"?0:l.options.length-1;y.value.scrollToIndex(C),requestAnimationFrame(()=>{const E=c(),q=m==="first"?E[0]:E[E.length-1];q&&t.changeHighlight(q.ref)})}else if(!m&&!u){k.value+=o.key;const C=Number(He()?.getAttribute("data-index")),E=_.value[C].textContent,q=_.value.map(v=>v.textContent??""),S=De(q,k.value,E),A=_.value.find(v=>v.textContent===S);A&&(y.value.scrollToIndex(A.index,{align:"start"}),requestAnimationFrame(()=>{const v=f.value.querySelector(`[data-index="${A.index}"]`);v instanceof HTMLElement&&t.changeHighlight(v)}))}}),(o,u)=>(w(),se("div",{"data-reka-virtualizer":"",style:Ne({position:"relative",width:"100%",height:`${a(y).getTotalSize()}px`})},[(w(!0),se(ne,null,Me(p.value,({is:s,item:m})=>(w(),L(ze(s),{key:m.index}))),128))],4))}}),wt=st;export{kt as L,Et as a,xt as b,bt as c,wt as d,Ct as e,yt as f,G as g,_t as i};
