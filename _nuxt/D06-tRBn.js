import{g as F}from"./CuerbVKd.js";import{r as z,J as h,Z as S,bx as T,H as k,j as V,P as B}from"./r87NNr1M.js";const y=(M,g={},{collapsed:v=z(!1)}={})=>{const o=z(null),e=h(()=>({side:"left",minSize:0,maxSize:100,defaultSize:0,storage:"cookie",persistent:!0,collapsible:!1,collapsedSize:0,resizable:!0,unit:"%",...S(g)?g.value:g})),{dir:X}=T(),b={size:e.value.defaultSize,collapsed:k(v)??!1},c=e.value.persistent&&(e.value.resizable||e.value.collapsible)?e.value.storage==="cookie"?V(M,{default:()=>b}):F(M,b):z(b),s=h({get:()=>c.value.collapsed,set:t=>{e.value.collapsible&&(S(v)&&(v.value=t),c.value.collapsed=t)}}),L=z(e.value.defaultSize),f=h({get:()=>c.value.size,set:t=>{c.value.size=t}}),w=h(()=>s.value?e.value.collapsedSize:f.value),p=z(!1),x=(t,l,r)=>{if(!o.value||!e.value.resizable)return;const d=o.value.parentElement?.offsetWidth||1,i=X.value==="rtl";let a;i?a=e.value.side==="left"?l-t.clientX:t.clientX-l:a=e.value.side==="left"?t.clientX-l:l-t.clientX;const u=r+a;let n;if(e.value.unit==="rem"){const E=Number.parseFloat(getComputedStyle(document.documentElement).fontSize);n=u/E}else e.value.unit==="px"?n=u:n=u/d*100;if(e.value.collapsible&&n<e.value.collapsedSize+4){m(!0);return}else s.value&&m(!1);f.value=Math.min(e.value.maxSize,Math.max(e.value.minSize,n))},C=t=>{if(!o.value||!e.value.resizable)return;t.preventDefault(),t.stopPropagation();const l=o.value.getBoundingClientRect().width;if(!l)return;const r=t.clientX,d=l;p.value=!0;const i=u=>{x(u,r,d)},a=()=>{p.value=!1,document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",a)},D=(t,l,r)=>{if(!o.value||!e.value.resizable||!t.touches[0])return;const d=o.value.parentElement?.offsetWidth||1,i=X.value==="rtl";let a;i?a=e.value.side==="left"?l-t.touches[0].clientX:t.touches[0].clientX-l:a=e.value.side==="left"?t.touches[0].clientX-l:l-t.touches[0].clientX;const u=r+a;let n;if(e.value.unit==="rem"){const E=Number.parseFloat(getComputedStyle(document.documentElement).fontSize);n=u/E}else e.value.unit==="px"?n=u:n=u/d*100;if(e.value.collapsible&&n<e.value.collapsedSize+4){m(!0);return}else s.value&&m(!1);f.value=Math.min(e.value.maxSize,Math.max(e.value.minSize,n))},R=t=>{if(!o.value||!e.value.resizable||!t.touches[0])return;t.preventDefault(),t.stopPropagation();const l=o.value.getBoundingClientRect().width;if(!l)return;const r=t.touches[0].clientX,d=l;p.value=!0;const i=u=>{D(u,r,d)},a=()=>{p.value=!1,document.removeEventListener("touchmove",i),document.removeEventListener("touchend",a),document.removeEventListener("touchcancel",a)};document.addEventListener("touchmove",i,{passive:!1}),document.addEventListener("touchend",a),document.addEventListener("touchcancel",a)},W=t=>{!o.value||!e.value.resizable||(t.preventDefault(),t.stopPropagation(),s.value&&m(!1),f.value=e.value.defaultSize)},m=t=>{if(!e.value.collapsible)return;const l=t??!s.value;l&&!s.value?L.value=f.value:!l&&s.value&&(f.value=L.value),s.value=l};return S(v)&&c.value.collapsed&&(v.value=c.value.collapsed),S(v)&&B(v,t=>{e.value.collapsible&&c.value.collapsed!==t&&(c.value.collapsed=t)}),{el:o,size:w,isDragging:p,isCollapsed:s,onMouseDown:C,onTouchStart:R,onDoubleClick:W,collapse:m}};export{y as u};
